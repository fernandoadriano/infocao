{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/adriano/Estudos/Bootcamp React/Modulo03/infocao/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/adriano/Estudos/Bootcamp React/Modulo03/infocao/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/adriano/Estudos/Bootcamp React/Modulo03/infocao/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _taggedTemplateLiteral from \"/Users/adriano/Estudos/Bootcamp React/Modulo03/infocao/node_modules/next/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"/Users/adriano/Estudos/Bootcamp React/Modulo03/infocao/src/components/Screens/templates/MainScreen/index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: 30px;\\n  margin: 0 auto;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport Raca from 'src/components/Raca';\nimport ListaRacas from 'src/components/ListaRacas';\nimport Cabecalho from 'src/components/Cabecalho';\nimport RacaContext from 'src/Contexts/RacaContext';\nimport { buscaSobreRacas, buscaImagemPorRaca, buscaTodasRacas } from 'src/api';\nvar MainScreenStyled = styled.div(_templateObject());\n_c = MainScreenStyled;\n\nvar MainScreen = function MainScreen() {\n  _s();\n\n  var _useState = useState('Você ainda não selecionou nenhum cachorro :('),\n      status = _useState[0],\n      setStatus = _useState[1];\n\n  var _useState2 = useState([]),\n      racas = _useState2[0],\n      setRacas = _useState2[1];\n\n  var _useState3 = useState({}),\n      racaSelecionada = _useState3[0],\n      setRacaSelecionada = _useState3[1];\n\n  var selectionarRaca = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(raca) {\n      var inforSelecionada, imagem, eh404, _mensagem;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              inforSelecionada = racas.filter(function (r) {\n                return r.name === raca;\n              }); // console.log('selecionou', inforSelecionada);\n\n              _context.prev = 1;\n              _context.next = 4;\n              return buscaImagemPorRaca(raca);\n\n            case 4:\n              imagem = _context.sent;\n              setRacaSelecionada(_objectSpread({\n                racaSelecionada: racaSelecionada,\n                imagem: imagem\n              }, infoSelecionada[0]));\n              setStatus('A imagem sempre será diferente, pode clicar quantas vezes quiser!');\n              _context.next = 13;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n              eh404 = _context.t0.response.status === 404;\n              _mensagem = eh404 ? 'Não encontramos essa raça :(' : 'Oops, algo deu errado. Pode tentar novamente?';\n\n            case 13:\n              _context.prev = 13;\n\n              _this.setState({\n                status: mensagem\n              });\n\n              return _context.finish(13);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 9, 13, 16]]);\n    }));\n\n    return function selectionarRaca(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var dadosRacas, listaRacasFotos;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return buscaSobreRacas();\n\n          case 3:\n            dadosRacas = _context2.sent;\n            _context2.next = 6;\n            return buscaTodasRacas();\n\n          case 6:\n            listaRacasFotos = _context2.sent;\n            setRacas(dadosRacas.filter(function (dado) {\n              return listaRacasFotos.includes(dado.name.toLowerCase());\n            }));\n            _context2.next = 13;\n            break;\n\n          case 10:\n            _context2.prev = 10;\n            _context2.t0 = _context2[\"catch\"](0);\n            setStatus('Oops, algo deu errado no carregamento da página. Pode tentar novamente?');\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 10]]);\n  })), []);\n  return /*#__PURE__*/_jsxDEV(RacaContext.Provider, {\n    value: {\n      setRacaSelecionada: selectionarRaca\n    },\n    children: /*#__PURE__*/_jsxDEV(MainScreenStyled, {\n      children: [/*#__PURE__*/_jsxDEV(Cabecalho, {\n        status: status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Raca, {\n        raca: racaSelecionada\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(ListaRacas, {\n        racas: racas\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(MainScreen, \"CXoQoGClfm6vkFkdN0gHKQYjDtI=\");\n\n_c2 = MainScreen;\nexport default MainScreen;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"MainScreenStyled\");\n$RefreshReg$(_c2, \"MainScreen\");","map":{"version":3,"sources":["/Users/adriano/Estudos/Bootcamp React/Modulo03/infocao/src/components/Screens/templates/MainScreen/index.js"],"names":["React","useState","useEffect","styled","Raca","ListaRacas","Cabecalho","RacaContext","buscaSobreRacas","buscaImagemPorRaca","buscaTodasRacas","MainScreenStyled","div","MainScreen","status","setStatus","racas","setRacas","racaSelecionada","setRacaSelecionada","selectionarRaca","raca","inforSelecionada","filter","r","name","imagem","infoSelecionada","eh404","response","mensagem","setState","dadosRacas","listaRacasFotos","dado","includes","toLowerCase"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport styled from 'styled-components';\n\nimport Raca from 'src/components/Raca';\nimport ListaRacas from 'src/components/ListaRacas';\nimport Cabecalho from 'src/components/Cabecalho';\n\nimport RacaContext from 'src/Contexts/RacaContext';\n\nimport { buscaSobreRacas, buscaImagemPorRaca, buscaTodasRacas } from 'src/api';\n\nconst MainScreenStyled = styled.div`\n  padding: 30px;\n  margin: 0 auto;\n`;\n\nconst MainScreen = () => {\n  const [status, setStatus] = useState('Você ainda não selecionou nenhum cachorro :(');\n  const [racas, setRacas] = useState([]);\n  const [racaSelecionada, setRacaSelecionada] = useState({});\n  const selectionarRaca = async (raca) => {\n    const inforSelecionada = racas.filter((r) => r.name === raca);\n    // console.log('selecionou', inforSelecionada);\n\n    try {\n      const imagem = await buscaImagemPorRaca(raca);\n      setRacaSelecionada({ racaSelecionada, imagem, ...infoSelecionada[0] });\n      setStatus('A imagem sempre será diferente, pode clicar quantas vezes quiser!');\n    } catch (erro) {\n      const eh404 = erro.response.status === 404;\n      const mensagem = eh404 ? 'Não encontramos essa raça :(' : 'Oops, algo deu errado. Pode tentar novamente?';\n    } finally {\n      this.setState({ status: mensagem });\n    }\n  };\n\n  useEffect(async () => {\n    try {\n      const dadosRacas = await buscaSobreRacas();\n      const listaRacasFotos = await buscaTodasRacas();\n\n      setRacas(dadosRacas.filter((dado) => listaRacasFotos.includes(dado.name.toLowerCase())));\n    } catch {\n      setStatus('Oops, algo deu errado no carregamento da página. Pode tentar novamente?');\n    }\n  }, []);\n\n  return (\n    <RacaContext.Provider value={{\n      setRacaSelecionada: selectionarRaca,\n    }}\n    >\n      <MainScreenStyled>\n        <Cabecalho status={status} />\n        <Raca raca={racaSelecionada} />\n        <ListaRacas racas={racas} />\n      </MainScreenStyled>\n    </RacaContext.Provider>\n  );\n};\n\nexport default MainScreen;\n"]},"metadata":{},"sourceType":"module"}